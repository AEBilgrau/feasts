<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to feasts • feasts</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to feasts">
<meta property="og:description" content="">
<meta property="og:image" content="https://feasts.tidyverts.org/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145121339-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-145121339-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">feasts</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/feasts.html">Introduction to feasts</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tidyverts/feasts">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to feasts</h1>
            
      
      
      <div class="hidden name"><code>feasts.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(feasts)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tsibble)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a></code></pre></div>
<p>The feasts package provides a smorgasbord of tools for analysing tidy temporal data in the tsibble format. The package name is an acronym of its primary functionality: <em>Feature Extraction and Statistics for Time Series</em>.</p>
<p>Suppose we wanted to analyse seasonal patterns in the number of people travel domestically to Melbourne, Australia. In the <code><a href="https://tsibble.tidyverts.org/reference/tourism.html">tsibble::tourism</a></code> dataset, this can be further broken down into 4 reasons of travel: “business”, “holiday”, “visiting friends and relatives” and “other reasons”. The first observation from each series are shown below.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">tourism_melb &lt;-<span class="st"> </span>tourism <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(Region <span class="op">==</span><span class="st"> "Melbourne"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(Purpose) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; # A tsibble: 4 x 5 [?]</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; # Key:       Region, State, Purpose [4]</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; # Groups:    Purpose [4]</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;   Quarter Region    State    Purpose  Trips</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt;     &lt;qtr&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; 1 1998 Q1 Melbourne Victoria Business 405. </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; 2 1998 Q1 Melbourne Victoria Holiday  428. </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; 3 1998 Q1 Melbourne Victoria Other     79.9</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; 4 1998 Q1 Melbourne Victoria Visiting 666.</span></a></code></pre></div>
<p>A useful first look of a time series is with a standard time series plot.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(Trips)</a></code></pre></div>
<p><img src="feasts_files/figure-html/plot-1.png" width="672"></p>
<p>This plot reveals that each of the reasons for visiting Melbourne follow a similar pattern, and that in recent years the amount of tourism is increasing. It is also clear that most people travel to Melbourne for one of three reasons (Business, Holiday or Visiting), and much less travellers report other travel purposes.</p>
<p>While this plot reveals many useful large scale features of the data, it can be difficult to identify specifics about the seasonal pattern (other than its existance). Which quarter has the most tourism travel in Melbourne? To find out we will need to investigate other plot types.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/gg_season.html">gg_season</a></span>(Trips)</a></code></pre></div>
<p><img src="feasts_files/figure-html/season-plot-1.png" width="672"></p>
<p>The seasonal plot (<code><a href="../reference/gg_season.html">gg_season()</a></code>) wraps a seasonal period (in this case, years) over the x axis, allowing you to see how each quarter varies. In particular, it is apparent that Q3 is a low point for people visiting friends and relatives, which noticably increases with the holidays in Q4. Similarly Q2 and Q3 are the time periods with the most business travel.</p>
<p>The trend of recent years can also be seen in the spread between the lines. The more recent years (purple/pink) are higher than the previous years. This also reveals that the drop in visiting tourism in Q3 was far less extreme in the most recent two years.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/gg_subseries.html">gg_subseries</a></span>(Trips)</a></code></pre></div>
<p><img src="feasts_files/figure-html/subseries-plot-1.png" width="672"></p>
<p>An alternative visualisation of seasonal patterns is the subseries plot (<code><a href="../reference/gg_subseries.html">gg_subseries()</a></code>), which isolates seasonal periods into separate plots. The blue lines indicate the average number of trips in each quarter, making the increase in visiting tourism from Q3 to Q4 more obvious. This plot style is especially useful in seeing how seasonality changes over time. Focusing on the visiting tourism (last row of facets), the number of tourists in Q3 and Q4 are increasing much more than in Q1 and Q2 (suggesting that the trend may vary between seasons).</p>
<p>A look at the correlations in each series could reveal structures which is difficult to identify in the above plots.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/ACF.html">ACF</a></span>(Trips)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; # A tsibble: 76 x 5 [1Q]</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; # Key:       Region, State, Purpose [4]</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;    Region    State    Purpose    lag     acf</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;    &lt;lag&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;  1 Melbourne Victoria Business    1Q  0.487 </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  2 Melbourne Victoria Business    2Q  0.193 </span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  3 Melbourne Victoria Business    3Q  0.331 </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  4 Melbourne Victoria Business    4Q  0.470 </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  5 Melbourne Victoria Business    5Q  0.219 </span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  6 Melbourne Victoria Business    6Q  0.0750</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  7 Melbourne Victoria Business    7Q  0.168 </span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;  8 Melbourne Victoria Business    8Q  0.321 </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;  9 Melbourne Victoria Business    9Q  0.166 </span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; 10 Melbourne Victoria Business   10Q -0.0183</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; # … with 66 more rows</span></a></code></pre></div>
<p>The above code computes autocorrelations (<code><a href="../reference/ACF.html">ACF()</a></code>), however it is also possible to compute partial autocorrelations (<code><a href="../reference/ACF.html">PACF()</a></code>) and cross-correlations (<code><a href="../reference/ACF.html">CCF()</a></code>).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/ACF.html">ACF</a></span>(Trips) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>()</a></code></pre></div>
<p><img src="feasts_files/figure-html/acf-plot-1.png" width="672"></p>
<p>The tables given from these correlation functions also have a nice <code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot()</a></code> method, which will show the correlations along with a threshold for significance (controllable with the <code>level</code> argument).</p>
<p>Another helpful strategy in investigating the components of a time series is to decompose the components of interest. A useful decomposition for this is the STL decomposition, which allows you to extract multiple seasonal patterns with any seasonal period.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/STL.html">STL</a></span>(Trips <span class="op">~</span><span class="st"> </span><span class="kw">season</span>(<span class="dt">window =</span> <span class="st">"periodic"</span>))</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; # A dable:           320 x 9 [1Q]</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; # Key:               Region, State, Purpose [4]</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; # STL Decomposition: Trips = trend + season_year + remainder</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;    Region State Purpose    Quarter Trips trend season_year remainder</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;        &lt;qtr&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt;  1 Melbo… Vict… Busine…    1998 Q1  405.  437.      -58.0      25.8 </span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt;  2 Melbo… Vict… Busine…    1998 Q2  408.  434.       18.1     -44.1 </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt;  3 Melbo… Vict… Busine…    1998 Q3  486.  430.       37.9      18.3 </span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt;  4 Melbo… Vict… Busine…    1998 Q4  429.  431.        1.99     -3.48</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt;  5 Melbo… Vict… Busine…    1999 Q1  361.  427.      -58.0      -7.82</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt;  6 Melbo… Vict… Busine…    1999 Q2  486.  409.       18.1      58.6 </span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt;  7 Melbo… Vict… Busine…    1999 Q3  359.  418.       37.9     -97.0 </span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt;  8 Melbo… Vict… Busine…    1999 Q4  426.  440.        1.99    -16.7 </span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#&gt;  9 Melbo… Vict… Busine…    2000 Q1  495.  468.      -58.0      84.1 </span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="co">#&gt; 10 Melbo… Vict… Busine…    2000 Q2  499.  501.       18.1     -19.8 </span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18"><span class="co">#&gt; # … with 310 more rows, and 1 more variable: season_adjust &lt;dbl&gt;</span></a></code></pre></div>
<p>The above call to <code><a href="../reference/STL.html">STL()</a></code> has decomposed the <code>Trips</code> variable into three components such that <code>Trips = trend + season_year + remainder</code>. By setting <code>season(window = "periodic")</code>, we have imposed that the seasonal pattern will not change - you can control how quickly the seasonal pattern can change by setting this to some number.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/STL.html">STL</a></span>(Trips <span class="op">~</span><span class="st"> </span><span class="kw">season</span>(<span class="dt">window =</span> <span class="dv">6</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>()</a></code></pre></div>
<p><img src="feasts_files/figure-html/stl-plot-1.png" width="672"></p>
<p>Much like the table from <code><a href="../reference/ACF.html">ACF()</a></code>, decompositions can also be plotted with <code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot()</a></code>. This gives the expected facetted plot of the components extracted from the measured variable. The plot shows that each purpose of travel has a different seasonal pattern, and that the strength and structure of this pattern has changed over time. As these components are often on different scales, this plot includes a set of scale bars which are of equal scaled size across all plots.</p>
<p>The above plots and analysis are useful for if you’re looking at a few series, but what can be done if you needed to look at and compare more time series? Extracting features from a collection of time series is a scalable approach to analysing many datasets. Each feature is a numerical summary of the dataset’s defining characteristics, and a set of features can be created using <code>feature_set()</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">tourism_melb_features &lt;-<span class="st"> </span>tourism_melb <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw">features</span>(Trips, <span class="kw">feature_set</span>(<span class="dt">tags =</span> <span class="st">"stl"</span>))</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">tourism_melb_features</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 10</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt;   Region State Purpose trend_strength seasonal_streng… spikiness linearity</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; 1 Melbo… Vict… Busine…          0.776            0.541     564.       349.</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; 2 Melbo… Vict… Holiday          0.860            0.283     692.       794.</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; 3 Melbo… Vict… Other            0.819            0.132      13.2      200.</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt; 4 Melbo… Vict… Visiti…          0.751            0.448     968.       458.</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt; # … with 3 more variables: curvature &lt;dbl&gt;, seasonal_peak_year &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt; #   seasonal_trough_year &lt;dbl&gt;</span></a></code></pre></div>
<p>In the example above, the components from the STL decomposition has been used to summarise the strength of trend and seasonality components of each series.</p>
<p>These features are particularly useful to show on a plot.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">tourism_melb_features <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> trend_strength, <span class="dt">y =</span> seasonal_strength_year, <span class="dt">colour =</span> Purpose)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_equal</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/lims.html">lims</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>,<span class="dv">1</span>))</a></code></pre></div>
<p><img src="feasts_files/figure-html/featutes-plot-1.png" width="672"></p>
<p>When analysing just four series, a plot of the features does not look very exciting. It is worth noting that a lot of the individuality seen in the previous analysis have been lost when each series is summarised down to just two values. However recall that the analysis has been working from a very small subset of the complete <code>tourism</code> dataset. Let’s see how Melbourne compares with the other regions in the data.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">tourism_features &lt;-<span class="st"> </span>tourism <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw">features</span>(Trips, feat_stl)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">mapping =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> trend_strength, <span class="dt">y =</span> seasonal_strength_year, <span class="dt">colour =</span> Purpose)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">data =</span> tourism_features, <span class="dt">alpha =</span> <span class="fl">0.3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">data =</span> tourism_melb_features, <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_equal</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/vars.html">vars</a></span>(Purpose)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/lims.html">lims</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>,<span class="dv">1</span>))</a></code></pre></div>
<p><img src="feasts_files/figure-html/features-all-plot-1.png" width="672"></p>
<p>Looks like Melbourne is one of the <em>trendiest</em> places around Australia.</p>
<p>More information about time series analysis using the feasts package can be found in <a href="https://otexts.com/fpp3/"><em>Forecasting: Principles and Practices (3rd Ed.)</em></a> and in the <a href="feasts.tidyverts.org/"><em>pkgdown site</em></a>.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://mitchelloharawild.com">Mitchell O'Hara-Wild</a>, <a href="http://robjhyndman.com">Rob Hyndman</a>, <a href="https://earo.me">Earo Wang</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
